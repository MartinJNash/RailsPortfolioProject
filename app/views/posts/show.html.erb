<% content_for :title, "#{@post.title} | Martin Nash" %>

<div class="row">
  <div class="columns small-12">

    <p id="notice">
      <%= notice %>
    </p>

    <h2>
      <%= @post.title %>
    </h2>

    <p>
      <%= simple_format @post.body %>
    </p>


    <%= form_for [@post, @comment = Comment.new] do |f| %>
      <%= f.label :content, "Content" %>
      <%= f.text_field :content %>

      <%= f.hidden_field :commentable_id, value: @post.id %>
      <%= f.hidden_field :commentable_type, value: @post.class.to_s %>

      <%= f.submit "Comment", data: { :disable_with => 'Commenting...' } %>
    <% end %>

    <% @post.comments.each do |comment| %>
      <div class="comment">
        <%= comment.content %>
      </div>
    <% end %>


    <% if policy(@post).update? %>
      <%= link_to 'Edit', edit_post_path(@post) %> |
    <% end %>

    <% if policy(@post).destroy? %>
      <%= link_to 'Delete', post_path(@post), method: :delete %> |
    <% end %>

    <%= link_to 'Back', posts_path %>

    <div id="author">
      <p><b>By:</b> <%= @post.author.email %></p>
    </div>

    <p id="status"><b>Status: </b><%= @post.published? ? "Published" : "Unpublished" %></p>


  </div>
</div>


